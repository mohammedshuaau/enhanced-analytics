window.Alpine||(window.Alpine=Alpine,Alpine.start());Alpine.data("consentBanner",()=>({show:!0,showSettings:!1,settings:{geolocation:!0},init(){if(localStorage.getItem("analytics_consent")){this.show=!1;return}const e=localStorage.getItem("analytics_settings");e&&(this.settings=JSON.parse(e))},toggleGeolocation(){this.settings.geolocation=!this.settings.geolocation},accept(){this.saveConsent(!0),this.show=!1},decline(){this.saveConsent(!1),this.show=!1},toggleSettings(){this.showSettings=!this.showSettings},saveConsent(t){localStorage.setItem("analytics_consent",t?"accepted":"declined"),localStorage.setItem("analytics_settings",JSON.stringify(this.settings)),fetch("/enhanced-analytics/consent",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({consent:t,settings:this.settings})}).catch(e=>console.error("Error saving consent:",e)),window.dispatchEvent(new CustomEvent("analytics-consent-changed",{detail:{consent:t,settings:this.settings}}))}}));
